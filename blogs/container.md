# 啥是容器？一种省事省钱的技术！

IT 领域的新技术、新概念总是层出不穷，例如我司让人津津乐道的 **ABCDMIX** 黑科技；出于业务的需要，开发模型也在不断变革，例如从提倡面向功能的瀑布式开发到提倡面向产品的敏捷开发，云计算成为新的应用程序的基础架构，开发框架从单体分层模型到微服务，容器亦成为了新的打包及发布方式。

所有的创新都遵循同一个底层逻辑，就是使得技术开发的效率大大提升，同时以更低的成本交付质量更高的产品。

> 说人话，就是**“省事”、“省钱“**。

容器技术是啥，说白了就是一种省事省钱的技术，这是它近年来持续火爆的原因。具体是怎么省下来的，容兄弟细说容器技术的两个重要组成部分：**docker（打包） 与 kubernetes（运行）**。

## 聊聊 docker

兄弟看来，容器就是一种软件打包技术，目前大家广泛使用 `docker` 来进行软件打包，因此在很多语境下，`docker` 与容器往往是相通的。

> 容器是一种轻量级、可移植、自包含的软件打包技术，它使得应用程序可以在几乎任何地方以相同的方式运行。

所谓的“省事”，说的就是这个打包技术。`docker` 使工程师在自己电脑上创建并测试完成的容器，无须任何修改就能够在交付环境的虚拟机或云主机上运行。

回想一下，工作中是否碰到过下面这些场景？

[图]

在开发的场景下，软件程序的运行环境往往是不稳定的，甚至软件程序自身就处于不断变化之中。这种情况下，由于各自环境配置的差异造成的程序运行不一致时有发生，处理这种问题往往非常耗时，需要逐一比对环境配置，可是对应用开发却毫无意义——生产又是一个完全不同的环境！

不一致的情况往往还出现在生产环境，这个时候的影响面就更大了。一套紧急版本的流程走下来，又可以看看凌晨 3 点的广州了。

> 必须承认，只要是人捣鼓出来的东西，错误就是无法避免的。

软件测试领域有一句广为流传的话，“如果你发现了一个 bug，那证明系统中还藏着十个 bug”。这里面没有丝毫夸张，实际情况就是如此，人非机器，可能这就是软件行业的“操作风险”吧。

容器技术消除了开发、测试、生产环境的不一致性，使得开发团队的工作变得更高效：要彻底解决”环境问题“，就是使用同一个环境。

## 聊聊 kubernetes

docker 本身非常适合用于管理单个容器，可是，一旦使用容器封装和运行的应用程序越来越多，管理的问题也变得越来越困难，容器编排技术应运而生，而 kubernetes 就是其中的代表技术。

真正的生产型应用会涉及多个容器，这些容器必须跨多个服务器主机进行部署以满足高可用的要求。借助于 kubernetes 的编排功能，我们可以构建出跨多个容器的应用服务，并实现集群调度、弹性伸缩、以及持续管理容器的健康状况。

等等，不是要说”省钱“吗？上面这套高大上的东东，少花钱就很不错了，还能省钱？

[图]

有一本书叫做《集装箱改变世界》，作者是一位美国人叫马克，罗辑思维亦就这个话题做过一期节目，没记错的话叫“改变世界的箱子”。在容器技术的世界中，如果说 docker 是包装环境与应用的集装箱，那么 kubernetes 就是一艘集装箱货船。有意思的是，kubernetes 这个词来源于希腊语，希腊是世界海运大国，而 kubernetes 的意思是“舵手”。

正如集装箱的出现大幅度降低了海运的成本，容器技术也能够大大降低 IT 的成本。

> 不然为啥互联网巨头都在“拥抱容器”，难道仅仅是“热爱学习新技术”吗？

IT 挺贵的，而容器这玩意儿能省钱，省下来的也是利润呀。具体怎么省呢？兄弟也没有算过明细账，从两个方面大致聊聊。

**一个是节省人力**。生产型应用一般都配备相应的运维团队，一线、二线乃至更后方的支持人员，kubernetes 提供的自动发布和回滚，自我修复，水平扩展等重要功能，能够减少运维的需要。这对于采用公有云作为底层基础设施的团队更为重要，因为往往应用的开发与运维两种角色，都集中到一个团队身上了，多一位看告警短信处理生产问题的运维人员，就意味着少一位码代码创造新价值的开发人员。

**另一个是节省设备**。据说现在的集装箱货船已经越造越大，出现了“巴拿马级”乃至“马六甲级”的概念，一艘船上面可以装超过一万个标准集装箱。容器技术也是这样。如果是建一个微型集群跑几个简单应用，与直接使用裸 CVM 跑应用相比，肯定是不划算的；但是把船造大一点，再多装一些集装箱，规模效应上去了，相应的设备资源肯定能省下一大截。

应用容器化之后，还有一个好处，就是统一调度联机应用和批处理应用将成为可能。举个简单的例子，白天资源向联机应用倾斜，晚上资源向批处理应用倾斜，两类应用在不同时间段错峰使用同一份设备资源，而无需各自独占。

## 未来已来

随着近年来我司公有云以及构筑在公有云之上的一系列新基础设施的投产，例如容器云、大数据云等等，软件应用程序的底层基础架构有了新的选择。

试想一下，一名具备基本计算机知识的员工，通过简单的配置，就能够使用包括网络、服务器、安全基础设施、负载均衡、中间件等丰富的云产品，能够快速把业务 idea 落地为金融级生产应用，这将带来多大的价值。

未来已来，未来可期，我辈幸哉！